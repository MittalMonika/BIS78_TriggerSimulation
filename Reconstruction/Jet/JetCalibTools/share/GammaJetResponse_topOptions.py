##############################################################################
###
### \file  GammaJetResponse_topOptions.py
###
### \author Sing-Leung Cheung (Toronto) <slcheung@physics.utoronto.ca>
###         Georgios Choudalakis (Chicago) <gchouda@hep.uchicago.edu>
###         Eric Feng (Chicago) <Eric.Feng@cern.ch>
###
### \@brief See header GammaJetResponse.h for documentation.
###
### $Id: GammaJetResponse_topOptions.py 319130 2010-08-31 15:23:28Z delsart $
###
##############################################################################

from JetRec.JetGetters import *

finder='AntiKt'
size=0.4
constituent='Topo'
signalState='EM'  #EM or H1

jetAlg = make_StandardJetGetter(finder, size, consitutent).jetAlgorithmHandle()
jetAlg.OutputLevel = DEBUG

from JetCalibTools.JetCalibToolsConf import *
GammaJetCalibTool = JetCalibrationTool("GammaJetCalibTool")
GammaJetCalibTool.Calibrator = GammaJetResponse()
GammaJetCalibTool.Calibrator.CalibrationTag = "GammaJet"
GammaJetCalibTool.Calibrator.WriteMoments = False


if (signalState=='EM'):  #calibrate jets from EM-scale

    if (finder=='AntiKt' and size==0.4 and constituent=='Topo'):    #AntiKt4TopoJets (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.55663} , {5,0.570402} , {10,0.584174} , {15,0.597946} , {20,0.611718} , {25,0.627251} , {30,0.6448} , {35,0.665147} , {40,0.677247} , {45,0.68596} , {50,0.690887} , {55,0.693289} , {60,0.695691} , {65,0.699813} , {70,0.704894} , {75,0.709975} , {80,0.715056} , {85,0.720137} , {90,0.722927} , {95,0.725612} , {100,0.728297} , {105,0.730981} , {110,0.733666} , {115,0.736351} , {120,0.739036} , {125,0.74172} , {130,0.743976} , {135,0.746108} , {140,0.748239} , {145,0.750371} , {150,0.752502} , {155,0.754634} , {160,0.756765} , {165,0.758897} , {170,0.760399} , {175,0.761278} , {180,0.762156} , {185,0.763035} , {190,0.763914} , {195,0.764793} , {200,0.765671} , {205,0.76655} , {210,0.767484} , {215,0.76851} , {220,0.769536} , {225,0.770561} , {230,0.771587} , {235,0.772613} , {240,0.773639} , {245,0.774664} , {250,0.77569} , {255,0.776716} , {260,0.777741} , {265,0.778533} , {270,0.779078} , {275,0.779622} , {280,0.780167} , {285,0.780712} , {290,0.781256} , {295,0.781801} , {300,0.782345}}";
        pass
    
    if (finder=='AntiKt' and size==0.6 and constituent=='Topo'):    #AntiKt6TopoJets (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.677477} , {5,0.65763} , {10,0.637784} , {15,0.617937} , {20,0.598091} , {25,0.60622} , {30,0.622739} , {35,0.643423} , {40,0.658284} , {45,0.673146} , {50,0.680902} , {55,0.68717} , {60,0.693439} , {65,0.699349} , {70,0.705103} , {75,0.710857} , {80,0.716611} , {85,0.722232} , {90,0.724682} , {95,0.727131} , {100,0.729581} , {105,0.73203} , {110,0.73448} , {115,0.736929} , {120,0.739379} , {125,0.741828} , {130,0.743478} , {135,0.744859} , {140,0.74624} , {145,0.747621} , {150,0.749002} , {155,0.750383} , {160,0.751764} , {165,0.753145} , {170,0.754492} , {175,0.755829} , {180,0.757167} , {185,0.758505} , {190,0.759843} , {195,0.761181} , {200,0.762518} , {205,0.763856} , {210,0.764887} , {215,0.765709} , {220,0.766531} , {225,0.767353} , {230,0.768175} , {235,0.768997} , {240,0.769819} , {245,0.770641} , {250,0.771463} , {255,0.772285} , {260,0.773107} , {265,0.774271} , {270,0.775573} , {275,0.776875} , {280,0.778178} , {285,0.77948} , {290,0.780782} , {295,0.782084} , {300,0.783387}}";
        pass
    
    if (finder=='Cone' and size==0.4 and constituent=='Topo'):    #Cone4Topo (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.614863} , {5,0.617068} , {10,0.619273} , {15,0.621477} , {20,0.623682} , {25,0.63254} , {30,0.647086} , {35,0.668221} , {40,0.679751} , {45,0.68655} , {50,0.689886} , {55,0.691128} , {60,0.692371} , {65,0.696617} , {70,0.702225} , {75,0.707833} , {80,0.713441} , {85,0.718922} , {90,0.721824} , {95,0.724727} , {100,0.72763} , {105,0.730533} , {110,0.733436} , {115,0.736338} , {120,0.739241} , {125,0.742144} , {130,0.74461} , {135,0.74694} , {140,0.74927} , {145,0.7516} , {150,0.75393} , {155,0.756261} , {160,0.758591} , {165,0.760921} , {170,0.762682} , {175,0.763527} , {180,0.764373} , {185,0.765218} , {190,0.766063} , {195,0.766908} , {200,0.767753} , {205,0.768599} , {210,0.769411} , {215,0.77013} , {220,0.770849} , {225,0.771567} , {230,0.772286} , {235,0.773005} , {240,0.773723} , {245,0.774442} , {250,0.775161} , {255,0.775879} , {260,0.776598} , {265,0.777266} , {270,0.777906} , {275,0.778545} , {280,0.779184} , {285,0.779823} , {290,0.780463} , {295,0.781102} , {300,0.781741}}";
        pass
    
    if (finder=='Cone' and size==0.7 and constituent=='Topo'):    #Cone7Topo (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.691778} , {5,0.68079} , {10,0.669803} , {15,0.658815} , {20,0.647827} , {25,0.648231} , {30,0.658038} , {35,0.679512} , {40,0.696247} , {45,0.708761} , {50,0.719263} , {55,0.723459} , {60,0.727655} , {65,0.731852} , {70,0.736058} , {75,0.740264} , {80,0.74447} , {85,0.748676} , {90,0.75218} , {95,0.754118} , {100,0.756056} , {105,0.757994} , {110,0.759932} , {115,0.76187} , {120,0.763808} , {125,0.765746} , {130,0.767684} , {135,0.769227} , {140,0.770722} , {145,0.772218} , {150,0.773714} , {155,0.77521} , {160,0.776705} , {165,0.778201} , {170,0.779697} , {175,0.781492} , {180,0.783626} , {185,0.78576} , {190,0.787895} , {195,0.790029} , {200,0.792163} , {205,0.794297} , {210,0.796431} , {215,0.798565} , {220,0.798522} , {225,0.79813} , {230,0.797738} , {235,0.797346} , {240,0.796954} , {245,0.796562} , {250,0.79617} , {255,0.795778} , {260,0.795386} , {265,0.794994} , {270,0.794602} , {275,0.794553} , {280,0.794516} , {285,0.794478} , {290,0.794441} , {295,0.794403} , {300,0.794365}}";
        pass
    
    if (finder=='Kt' and size==0.4 and constituent=='Topo'):    #Kt4Topo (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.574382} , {5,0.588698} , {10,0.603014} , {15,0.617331} , {20,0.631647} , {25,0.647628} , {30,0.664786} , {35,0.683782} , {40,0.698216} , {45,0.707447} , {50,0.715} , {55,0.718155} , {60,0.721309} , {65,0.724579} , {70,0.728465} , {75,0.73235} , {80,0.736236} , {85,0.740121} , {90,0.743394} , {95,0.745918} , {100,0.748441} , {105,0.750965} , {110,0.753489} , {115,0.756012} , {120,0.758536} , {125,0.76106} , {130,0.763541} , {135,0.765333} , {140,0.767124} , {145,0.768916} , {150,0.770708} , {155,0.772499} , {160,0.774291} , {165,0.776083} , {170,0.777874} , {175,0.778704} , {180,0.779124} , {185,0.779544} , {190,0.779963} , {195,0.780383} , {200,0.780803} , {205,0.781223} , {210,0.781643} , {215,0.782042} , {220,0.782425} , {225,0.782807} , {230,0.78319} , {235,0.783573} , {240,0.783956} , {245,0.784339} , {250,0.784722} , {255,0.785105} , {260,0.785488} , {265,0.785871} , {270,0.786371} , {275,0.786879} , {280,0.787387} , {285,0.787896} , {290,0.788404} , {295,0.788913} , {300,0.789421}}";
        pass

    if (finder=='Kt' and size==0.6 and constituent=='Topo'):    #Kt6Topo (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.652577} , {5,0.647077} , {10,0.641577} , {15,0.636077} , {20,0.630577} , {25,0.637019} , {30,0.650928} , {35,0.672106} , {40,0.688885} , {45,0.70285} , {50,0.714314} , {55,0.72086} , {60,0.727405} , {65,0.7339} , {70,0.737817} , {75,0.741733} , {80,0.745649} , {85,0.749565} , {90,0.752965} , {95,0.755177} , {100,0.757389} , {105,0.759601} , {110,0.761812} , {115,0.764024} , {120,0.766236} , {125,0.768448} , {130,0.77066} , {135,0.771953} , {140,0.772988} , {145,0.774022} , {150,0.775057} , {155,0.776092} , {160,0.777127} , {165,0.778161} , {170,0.779196} , {175,0.780093} , {180,0.780917} , {185,0.78174} , {190,0.782564} , {195,0.783387} , {200,0.784211} , {205,0.785034} , {210,0.785858} , {215,0.786602} , {220,0.787227} , {225,0.787853} , {230,0.788478} , {235,0.789103} , {240,0.789729} , {245,0.790354} , {250,0.790979} , {255,0.791605} , {260,0.79223} , {265,0.792855} , {270,0.793377} , {275,0.793728} , {280,0.79408} , {285,0.794432} , {290,0.794784} , {295,0.795136} , {300,0.795488}}";
        pass
    
    if (finder=='SISCone' and size==0.4 and constituent=='Topo'):    #SISCone4Topo (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.576895} , {5,0.586775} , {10,0.596655} , {15,0.606536} , {20,0.616416} , {25,0.631274} , {30,0.648099} , {35,0.665951} , {40,0.671201} , {45,0.671243} , {50,0.680297} , {55,0.692011} , {60,0.703725} , {65,0.711741} , {70,0.715686} , {75,0.719631} , {80,0.723576} , {85,0.72752} , {90,0.730539} , {95,0.733232} , {100,0.735925} , {105,0.738619} , {110,0.741312} , {115,0.744005} , {120,0.746698} , {125,0.749392} , {130,0.751792} , {135,0.753884} , {140,0.755977} , {145,0.75807} , {150,0.760163} , {155,0.762256} , {160,0.764348} , {165,0.766441} , {170,0.768267} , {175,0.76886} , {180,0.769452} , {185,0.770045} , {190,0.770637} , {195,0.77123} , {200,0.771823} , {205,0.772415} , {210,0.773003} , {215,0.773524} , {220,0.774045} , {225,0.774566} , {230,0.775087} , {235,0.775608} , {240,0.776128} , {245,0.776649} , {250,0.77717} , {255,0.777691} , {260,0.778212} , {265,0.778677} , {270,0.779089} , {275,0.779502} , {280,0.779915} , {285,0.780328} , {290,0.780741} , {295,0.781153} , {300,0.781566}}";
        pass
    
    if (finder=='SISCone' and size==0.7 and constituent=='Topo'):    #SISCone7Topo (EM)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.700637} , {5,0.680961} , {10,0.661286} , {15,0.64161} , {20,0.621935} , {25,0.626514} , {30,0.642762} , {35,0.666715} , {40,0.682722} , {45,0.695314} , {50,0.70523} , {55,0.711827} , {60,0.718425} , {65,0.724531} , {70,0.728812} , {75,0.733094} , {80,0.737376} , {85,0.741657} , {90,0.745004} , {95,0.747347} , {100,0.749689} , {105,0.752032} , {110,0.754374} , {115,0.756716} , {120,0.759059} , {125,0.761401} , {130,0.763711} , {135,0.765298} , {140,0.766885} , {145,0.768472} , {150,0.770059} , {155,0.771646} , {160,0.773234} , {165,0.774821} , {170,0.776408} , {175,0.778436} , {180,0.780696} , {185,0.782956} , {190,0.785216} , {195,0.787476} , {200,0.789735} , {205,0.791995} , {210,0.794255} , {215,0.796515} , {220,0.796255} , {225,0.795903} , {230,0.79555} , {235,0.795198} , {240,0.794845} , {245,0.794493} , {250,0.79414} , {255,0.793788} , {260,0.793435} , {265,0.793083} , {270,0.79278} , {275,0.792789} , {280,0.792798} , {285,0.792806} , {290,0.792815} , {295,0.792824} , {300,0.792833}}";
        pass
    
    pass


if (signalstate=='H1'):  #calibrate jets from H1 scale
    
    if (finder=='AntiKt' and size==0.4 and constituent=='Topo'):    #AntiKt4TopoJets (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,0.964657} , {5,0.957994} , {10,0.951331} , {15,0.944668} , {20,0.938005} , {25,0.931342} , {30,0.924679} , {35,0.92846} , {40,0.936762} , {45,0.94579} , {50,0.955155} , {55,0.960442} , {60,0.962848} , {65,0.965253} , {70,0.969996} , {75,0.975315} , {80,0.980634} , {85,0.985954} , {90,0.989533} , {95,0.991655} , {100,0.993777} , {105,0.995899} , {110,0.99802} , {115,1.00014} , {120,1.00177} , {125,1.00286} , {130,1.00394} , {135,1.00502} , {140,1.00611} , {145,1.00719} , {150,1.00827} , {155,1.00936} , {160,1.01044} , {165,1.01152} , {170,1.01261} , {175,1.01355} , {180,1.01436} , {185,1.01517} , {190,1.01598} , {195,1.01679} , {200,1.0176} , {205,1.01842} , {210,1.01923} , {215,1.02004} , {220,1.02085} , {225,1.02166} , {230,1.02176} , {235,1.02184} , {240,1.02191} , {245,1.02198} , {250,1.02206} , {255,1.02213} , {260,1.0222} , {265,1.02228} , {270,1.02235} , {275,1.02242} , {280,1.02282} , {285,1.02364} , {290,1.02446} , {295,1.02527} , {300,1.02609}}";
        pass
    
    if (finder=='AntiKt' and size==0.6 and constituent=='Topo'):    #AntiKt6TopoJets (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,1.17309} , {5,1.13926} , {10,1.10542} , {15,1.07158} , {20,1.03775} , {25,1.00391} , {30,0.970072} , {35,0.953952} , {40,0.956866} , {45,0.965102} , {50,0.978367} , {55,0.99122} , {60,1.00278} , {65,1.01434} , {70,1.02387} , {75,1.02284} , {80,1.02181} , {85,1.02078} , {90,1.01975} , {95,1.02066} , {100,1.02168} , {105,1.02271} , {110,1.02373} , {115,1.02476} , {120,1.02578} , {125,1.02584} , {130,1.02584} , {135,1.02585} , {140,1.02585} , {145,1.02586} , {150,1.02587} , {155,1.02587} , {160,1.02588} , {165,1.02589} , {170,1.02589} , {175,1.0259} , {180,1.02593} , {185,1.02596} , {190,1.02598} , {195,1.02601} , {200,1.02604} , {205,1.02607} , {210,1.0261} , {215,1.02613} , {220,1.02615} , {225,1.02618} , {230,1.02664} , {235,1.02729} , {240,1.02793} , {245,1.02858} , {250,1.02923} , {255,1.02988} , {260,1.03053} , {265,1.03118} , {270,1.03183} , {275,1.03248} , {280,1.03313} , {285,1.03362} , {290,1.0341} , {295,1.03457} , {300,1.03505}}";
        pass
    
    if (finder=='Cone' and size==0.4 and constituent=='Topo'):    #Cone4Topo (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,1.00838} , {5,1.00053} , {10,0.99267} , {15,0.984813} , {20,0.976957} , {25,0.9691} , {30,0.961243} , {35,0.959741} , {40,0.965574} , {45,0.973128} , {50,0.983051} , {55,0.99066} , {60,0.990986} , {65,0.991313} , {70,0.993574} , {75,0.998292} , {80,1.00301} , {85,1.00773} , {90,1.01208} , {95,1.01371} , {100,1.01535} , {105,1.01698} , {110,1.01862} , {115,1.02026} , {120,1.02189} , {125,1.02274} , {130,1.02355} , {135,1.02436} , {140,1.02517} , {145,1.02598} , {150,1.02679} , {155,1.02759} , {160,1.0284} , {165,1.02921} , {170,1.03002} , {175,1.03083} , {180,1.0315} , {185,1.03217} , {190,1.03283} , {195,1.0335} , {200,1.03416} , {205,1.03482} , {210,1.03549} , {215,1.03615} , {220,1.03682} , {225,1.03748} , {230,1.03789} , {235,1.0375} , {240,1.03711} , {245,1.03672} , {250,1.03633} , {255,1.03594} , {260,1.03555} , {265,1.03516} , {270,1.03477} , {275,1.03438} , {280,1.03399} , {285,1.03389} , {290,1.03387} , {295,1.03386} , {300,1.03384}}";
        pass
    
    if (finder=='Cone' and size==0.7 and constituent=='Topo'):    #Cone7Topo (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "{{0,1.11713} , {5,1.10002} , {10,1.08291} , {15,1.0658} , {20,1.04869} , {25,1.03157} , {30,1.01446} , {35,1.00273} , {40,1.01199} , {45,1.02126} , {50,1.02868} , {55,1.03603} , {60,1.03973} , {65,1.04204} , {70,1.04435} , {75,1.0469} , {80,1.04954} , {85,1.05217} , {90,1.0548} , {95,1.05629} , {100,1.0561} , {105,1.05591} , {110,1.05571} , {115,1.05552} , {120,1.05532} , {125,1.05512} , {130,1.05487} , {135,1.05463} , {140,1.05438} , {145,1.05413} , {150,1.05388} , {155,1.05363} , {160,1.05339} , {165,1.05314} , {170,1.05289} , {175,1.05264} , {180,1.05244} , {185,1.05288} , {190,1.05332} , {195,1.05376} , {200,1.05421} , {205,1.05465} , {210,1.05509} , {215,1.05554} , {220,1.05598} , {225,1.05642} , {230,1.05687} , {235,1.0574} , {240,1.05939} , {245,1.06137} , {250,1.06336} , {255,1.06535} , {260,1.06733} , {265,1.06932} , {270,1.07131} , {275,1.0733} , {280,1.07528} , {285,1.07727} , {290,1.07926} , {295,1.07854} , {300,1.07671}}";
        pass

    #Placeholders
    if (finder=='Kt' and size==0.4 and constituent=='Topo'):    #Kt4Topo (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "";  
        pass

    if (finder=='Kt' and size==0.6 and constituent=='Topo'):    #Kt6Topo (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "";
        pass
    
    if (finder=='SISCone' and size==0.4 and constituent=='Topo'):    #SISCone4Topo (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "";
        pass
    
    if (finder=='SISCone' and size==0.7 and constituent=='Topo'):    #SISCone7Topo (H1)
        GammaJetCalibTool.Calibrator.PtBinsValues = "";
        pass
    
    pass


## Append the jet tool
jetAlg.AlgTools += [ GammaJetCalibTool ]
