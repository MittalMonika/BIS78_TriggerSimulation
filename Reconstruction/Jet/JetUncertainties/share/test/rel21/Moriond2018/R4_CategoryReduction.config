
##############################################################################
#
#  JESProvider Input Settings
#    Full list of nuisance parameters from the 2018 Moriond recommendations
#    iteration of the JES.
#
#    XX NP groups
#
#    February 6, 2018
#
#  K. Pachal
# 
##############################################################################

UncertaintyRelease:                 rel21_Moriond2018
SupportedJetDefs:                   AntiKt4EMTopo,AntiKt4EMPFlow
SupportedMCTypes:                   MC16,AFII
UncertaintyRootFile:                rel21/Moriond2018/R4_AllComponents.root
AnalysisRootFile:                   analysisInputs/UnknownFlavourComp.root

# <Mu> obtained from ATLAS public plots
# <NPV> from Eric's pileup studies
# Note that Eric's studies find a MuRef of 22.8 instead.
Pileup.MuRef:                       24.2
Pileup.NPVRef:                      13.2

##############################################################################
# 
#   Settings for JES Components
#
##############################################################################

JESComponent.1.Name:                EffectiveNP_Statistical1
JESComponent.1.Desc:                Effective JES Uncertainty Statistical Component 1
JESComponent.1.Type:                Effective
JESComponent.1.Param:               Pt
JESComponent.1.Hists:               EffectiveNP_Statistical1

JESComponent.2.Name:                EffectiveNP_Statistical2
JESComponent.2.Desc:                Effective JES Uncertainty Statistical Component 2
JESComponent.2.Type:                Effective
JESComponent.2.Param:               Pt
JESComponent.2.Hists:               EffectiveNP_Statistical2

JESComponent.3.Name:                EffectiveNP_Statistical3
JESComponent.3.Desc:                Effective JES Uncertainty Statistical Component 3
JESComponent.3.Type:                Effective
JESComponent.3.Param:               Pt
JESComponent.3.Hists:               EffectiveNP_Statistical3

JESComponent.4.Name:                EffectiveNP_Statistical4
JESComponent.4.Desc:                Effective JES Uncertainty Statistical Component 4
JESComponent.4.Type:                Effective
JESComponent.4.Param:               Pt
JESComponent.4.Hists:               EffectiveNP_Statistical4

JESComponent.5.Name:                EffectiveNP_Statistical5
JESComponent.5.Desc:                Effective JES Uncertainty Statistical Component 5
JESComponent.5.Type:                Effective
JESComponent.5.Param:               Pt
JESComponent.5.Hists:               EffectiveNP_Statistical5

JESComponent.6.Name:                EffectiveNP_Statistical6
JESComponent.6.Desc:                Effective JES Uncertainty Statistical Component 6
JESComponent.6.Type:                Effective
JESComponent.6.Param:               Pt
JESComponent.6.Hists:               EffectiveNP_Statistical6

JESComponent.8.Name:                EffectiveNP_Modelling1
JESComponent.8.Desc:                Effective JES Uncertainty Modelling Component 1
JESComponent.8.Type:                Effective
JESComponent.8.Param:               Pt
JESComponent.8.Hists:               EffectiveNP_Modelling1

JESComponent.9.Name:                EffectiveNP_Modelling2
JESComponent.9.Desc:                Effective JES Uncertainty Modelling Component 2
JESComponent.9.Type:                Effective
JESComponent.9.Param:               Pt
JESComponent.9.Hists:               EffectiveNP_Modelling2

JESComponent.10.Name:                EffectiveNP_Modelling3
JESComponent.10.Desc:                Effective JES Uncertainty Modelling Component 3
JESComponent.10.Type:                Effective
JESComponent.10.Param:               Pt
JESComponent.10.Hists:               EffectiveNP_Modelling3

JESComponent.11.Name:                EffectiveNP_Modelling4
JESComponent.11.Desc:                Effective JES Uncertainty Modelling Component 4
JESComponent.11.Type:                Effective
JESComponent.11.Param:               Pt
JESComponent.11.Hists:               EffectiveNP_Modelling4

JESComponent.12.Name:                EffectiveNP_Detector1
JESComponent.12.Desc:                Effective JES Uncertainty Detector Component 1
JESComponent.12.Type:                Effective
JESComponent.12.Param:               Pt
JESComponent.12.Hists:               EffectiveNP_Detector1

JESComponent.13.Name:                EffectiveNP_Detector2
JESComponent.13.Desc:                Effective JES Uncertainty Detector Component 2
JESComponent.13.Type:                Effective
JESComponent.13.Param:               Pt
JESComponent.13.Hists:               EffectiveNP_Detector2

JESComponent.14.Name:                EffectiveNP_Mixed1
JESComponent.14.Desc:                Effective JES Uncertainty Mixed Component 1
JESComponent.14.Type:                Effective
JESComponent.14.Param:               Pt
JESComponent.14.Hists:               EffectiveNP_Mixed1

JESComponent.15.Name:                EffectiveNP_Mixed2
JESComponent.15.Desc:                Effective JES Uncertainty Mixed Component 2
JESComponent.15.Type:                Effective
JESComponent.15.Param:               Pt
JESComponent.15.Hists:               EffectiveNP_Mixed2

JESComponent.16.Name:                EffectiveNP_Mixed3
JESComponent.16.Desc:                Effective JES Uncertainty Mixed Component 3
JESComponent.16.Type:                Effective
JESComponent.16.Param:               Pt
JESComponent.16.Hists:               EffectiveNP_Mixed3

##############################################################################
# 
#   Special components
#
##############################################################################

# Eta intercalibration combines 2D components with standard 1D components.
# Use explicit groups

# Eta intercalibration: theory uncertainty
JESGroup.1.Name:                    EtaIntercalibration_Modelling
JESGroup.1.Desc:                    Eta intercalibration: MC generator modelling uncertainty
JESGroup.1.Type:                    Modelling
JESGroup.1.Corr:                    Correlated
JESGroup.1.Group:                   1
JESGroup.1.Reducible:               False

JESComponent.76.Name:               EtaIntercalibration_Modelling_orig
JESComponent.76.Desc:               Eta intercalibration: MC generator modelling uncertainty
JESComponent.76.Type:               Modelling
JESComponent.76.Param:              PtEta
JESComponent.76.Hists:              EtaIntercalibration_Modelling
JESComponent.76.Group:              1
JESComponent.76.Reducible:          False

# Eta intercalibration: total statistical and method uncertainty
JESGroup.2.Name:                    EtaIntercalibration_TotalStat
JESGroup.2.Desc:                    Eta intercalibration: statistical uncertainty
JESGroup.2.Type:                    Statistical
JESGroup.2.Corr:                    Correlated
JESGroup.2.Group:                   2
JESGroup.2.Reducible:               False

JESComponent.78.Name:               EtaIntercalibration_TotalStat_orig
JESComponent.78.Desc:               Eta intercalibration: statistical uncertainty
JESComponent.78.Type:               Statistical
JESComponent.78.Param:              PtEta
JESComponent.78.Hists:              EtaIntercalibration_TotalStat
JESComponent.78.Group:              2
JESComponent.78.Reducible:          False

# High pT term
JESComponent.82.Name:               SingleParticle_HighPt
JESComponent.82.Desc:               High pT term (2012 version)
JESComponent.82.Type:               Detector
JESComponent.82.Param:              Pt
JESComponent.82.Reducible:          False

# Calibration closure
JESComponent.83.Name:               RelativeNonClosure_MCTYPE
JESComponent.83.Desc:               Closure of the calibration, relative to MC16a
JESComponent.83.Type:               Other
JESComponent.83.Param:              PtAbsEta
JESComponent.83.Reducible:          False
# NOTE: MCTYPE in the name above will be replaced by the MC type used when initializing the provider

# Pileup needs to combine special 2D components with standard 1D components
# so it needs explicit groups.

# Mu term grouping
JESGroup.4.Name:                    Pileup_OffsetMu
JESGroup.4.Desc:                    Pileup: Offset, mu term
JESGroup.4.Type:                    Other
JESGroup.4.Corr:                    Correlated
JESGroup.4.Group:                   4
JESGroup.4.Reducible:               False

# Pileup: Original mu term
JESComponent.84.Name:               Pileup_OffsetMu_orig
JESComponent.84.Desc:               Pileup: Offset, mu term, independent
JESComponent.84.Type:               Other
JESComponent.84.Param:              PtEta
JESComponent.84.Special:            True
JESComponent.84.Hists:              Pileup_OffsetMu
JESComponent.84.Group:              4
JESComponent.84.Reducible:          False

# NPV term grouping
JESGroup.5.Name:                    Pileup_OffsetNPV
JESGroup.5.Desc:                    Pileup: Offset, NPV term
JESGroup.5.Type:                    Other
JESGroup.5.Corr:                    Correlated
JESGroup.5.Group:                   5
JESGroup.5.Reducible:               False

# Pileup: Original NPV term
JESComponent.86.Name:               Pileup_OffsetNPV_orig
JESComponent.86.Desc:               Pileup: Offset, NPV term, independent
JESComponent.86.Type:               Other
JESComponent.86.Param:              PtEta
JESComponent.86.Special:            True
JESComponent.86.Hists:              Pileup_OffsetNPV
JESComponent.86.Group:              5
JESComponent.86.Reducible:          False

# pT term grouping
JESGroup.6.Name:                    Pileup_PtTerm
JESGroup.6.Desc:                    Pileup: Offset, pT term
JESGroup.6.Type:                    Other
JESGroup.6.Corr:                    Correlated
JESGroup.6.Group:                   6
JESGroup.6.Reducible:               False

# Original pT term
JESComponent.88.Name:               Pileup_PtTerm_orig
JESComponent.88.Desc:               Pileup: Offset, pT term, independent
JESComponent.88.Type:               Other
JESComponent.88.Corr:               Correlated
JESComponent.88.Param:              PtEta
JESComponent.88.Special:            True
JESComponent.88.Hists:              Pileup_PtTerm_mu,Pileup_PtTerm_npv
JESComponent.88.Group:              6
JESComponent.88.Reducible:          False

# rho topology grouping
JESGroup.7.Name:                    Pileup_RhoTopology
JESGroup.7.Desc:                    Rho topology uncertainty (jet areas)
JESGroup.7.Type:                    Other
JESGroup.7.Corr:                    Correlated
JESGroup.7.Group:                   7
JESGroup.7.Reducible:               False

# Original JetAreas rho topology
JESComponent.90.Name:               Pileup_RhoTopology_orig
JESComponent.90.Desc:               Rho topology uncertainty (jet areas), independent
JESComponent.90.Type:               Other
JESComponent.90.Param:              PtEta
JESComponent.90.Special:            True
JESComponent.90.Hists:              Pileup_RhoTopology
JESComponent.90.Group:              7
JESComponent.90.Reducible:          False


# Flavour composition uncertainty
JESComponent.91.Name:               Flavor_Composition
JESComponent.91.Desc:               Flavor composition uncertainty
JESComponent.91.Type:               Modelling
JESComponent.91.Corr:               Correlated
JESComponent.91.Param:              PtEta
JESComponent.91.Special:            True
JESComponent.91.Hists:              flavorCompGlu,flavorCompLight

# Flavour response uncertainty
JESComponent.92.Name:               Flavor_Response
JESComponent.92.Desc:               Flavor response uncertainty (dominated by gluon response)
JESComponent.92.Type:               Modelling
JESComponent.92.Param:              PtEta
JESComponent.92.Special:            True
JESComponent.92.Hists:              FlavorResponse

# bJES uncertainty
JESComponent.96.Name:               BJES_Response
JESComponent.96.Desc:               JES uncertainty for b jets
JESComponent.96.Type:               Modelling
JESComponent.96.Param:              PtEta
JESComponent.96.Special:            True
JESComponent.96.Hists:              bJES
JESComponent.96.Reducible:          False

# Make one more explicit group for the punchthrough
JESGroup.10.Name:                    PunchThrough_MCTYPE
JESGroup.10.Desc:                    Punch-through correction uncertainty
JESGroup.10.Type:                    Detector
JESGroup.10.Corr:                    Correlated
JESGroup.10.Group:                   10
JESGroup.10.Reducible:               False

# Original punch-through uncertainty
JESComponent.97.Name:               PunchThrough_MCTYPE_orig
JESComponent.97.Desc:               Punch-through correction uncertainty, orig
JESComponent.97.Type:               Detector
JESComponent.97.Param:              PtAbsEta
JESComponent.97.Interp:             False
JESComponent.97.Special:            True
JESComponent.97.Hists:              PunchThrough_MCTYPE
JESComponent.97.Group:              10
JESComponent.97.Reducible:          False

# Eta intercalibration non-closure uncertainty
JESGroup.3.Name:                    EtaIntercalibration_NonClosure_highE
JESGroup.3.Desc:                    Eta intercalibration: non-closure uncertainty
JESGroup.3.Type:                    Other
JESGroup.3.Corr:                    Correlated
JESGroup.3.Group:                   3
JESGroup.3.Reducible:               False

JESComponent.80.Name:               EtaIntercalibration_NonClosure_highE_orig
JESComponent.80.Desc:               Eta intercalibration: non-closure uncertainty
JESComponent.80.Type:               Other
JESComponent.80.Param:              PtEta
JESComponent.80.Interp:             False
JESComponent.80.Hists:              EtaIntercalibration_NonClosure_highE
JESComponent.80.Group:              3
JESComponent.80.Reducible:          False

# Eta intercalibration non-closure uncertainty
JESGroup.11.Name:                   EtaIntercalibration_NonClosure_posEta
JESGroup.11.Desc:                   Eta intercalibration: non-closure uncertainty
JESGroup.11.Type:                   Other
JESGroup.11.Corr:                   Correlated
JESGroup.11.Group:                  11
JESGroup.11.Reducible:              False

JESComponent.98.Name:               EtaIntercalibration_NonClosure_posEta_orig
JESComponent.98.Desc:               Eta intercalibration: non-closure uncertainty
JESComponent.98.Type:               Other
JESComponent.98.Param:              PtEta
JESComponent.98.Interp:             False
JESComponent.98.Hists:              EtaIntercalibration_NonClosure_posEta
JESComponent.98.Group:              11
JESComponent.98.Reducible:          False

# Eta intercalibration non-closure uncertainty
JESGroup.12.Name:                   EtaIntercalibration_NonClosure_negEta
JESGroup.12.Desc:                   Eta intercalibration: non-closure uncertainty
JESGroup.12.Type:                   Other
JESGroup.12.Corr:                   Correlated
JESGroup.12.Group:                  12
JESGroup.12.Reducible:              False

JESComponent.99.Name:               EtaIntercalibration_NonClosure_negEta_orig
JESComponent.99.Desc:               Eta intercalibration: non-closure uncertainty
JESComponent.99.Type:               Other
JESComponent.99.Param:              PtEta
JESComponent.99.Interp:             False
JESComponent.99.Hists:              EtaIntercalibration_NonClosure_negEta
JESComponent.99.Group:              12
JESComponent.99.Reducible:          False

##############################################################################

