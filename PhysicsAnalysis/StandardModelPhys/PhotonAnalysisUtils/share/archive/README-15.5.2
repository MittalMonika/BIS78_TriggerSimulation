#RECIPE to run PhotonAnalysisUtils on release 15.5.2
#===================================================

#* configure athena for release 15.5.2 (for older releases look inside the archive/ subdirectory)
	cd cmthome_15.5.2
	source setup.sh -tag=15.5.2

#* check out and compile additional packages
	#go to your testarea

        cmt co -r egammaInterfaces-00-00-55 Reconstruction/egamma/egammaInterfaces
        cd Reconstruction/egamma/egammaInterfaces/cmt
        make
        cd -       

        cmt co -r egammaUtils-00-04-28 Reconstruction/egamma/egammaUtils
        cd Reconstruction/egamma/egammaUtils/cmt
        make
        cd -

	cmt co -r egammaTools-00-02-80 Reconstruction/egamma/egammaTools
	cd Reconstruction/egamma/egammaTools/cmt
	make
	cd -

	cmt co -r PhotonAnalysisAlgs-00-01-37 Reconstruction/egamma/egammaAnalysis/PhotonAnalysisAlgs
	cd Reconstruction/egamma/egammaAnalysis/PhotonAnalysisAlgs/cmt
	make
	cd -

        cmt co -r TrigObjectMatching-00-01-05 Trigger/TrigAnalysis/TrigObjectMatching
        cd Trigger/TrigAnalysis/TrigObjectMatching/cmt
        make
        cd -

* check out PhotonAnalysisUtils and compile:

#	using the HEAD :
	cmt co PhotonAnalysisUtils PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils

#	using the specific version (be aware that last author could have forgotten to change the version at next line): 
	cmt co -r PhotonAnalysisUtils-00-00-67 PhotonAnalysisUtils PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils


	cd PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils/cmt
	make
	cd -

* ... and be optimistic: Run! 
	cd PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils/run
	cp ../share/* .
#	cp PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils/share/*.py run
#	cp PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils/share/*.root run
#	cp PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils/share/*.txt run
#	cp PhysicsAnalysis/StandardModelPhys/PhotonAnalysisUtils/share/*.dat run
#	cd run
	ln -s <your-favourite-AOD> AOD.pool.root
	[or edit PAUanalysis_jobOptions.py and replace AOD.pool.root by a list of AOD]

#to launch PAU in interactive mode :
	athena.py PAUanalysis_jobOptions.py
#to launch on grid : 
	pathena --extFile CommonJobOptions.py,dzmid.dat,dzps.dat,dzstr.dat,PT2dist.root,photonLikelihoodJobOptions.py,photonLikelihoodPdf.root --inDS UserReplaceHereWithYourDataSet --outDS UserReplaceHereOutputDataset --nFilesPerJob 4 --tmpDir /tmp/UserReplaceHereHisName --site=ANALY_BNL PAUanalysis_jobOptions.py

#====================================
#===> ******IMPORTANT NOTE******* 
#===> NOTE: PAUanalysis_jobOptions.py is set up to perform photon recovery with official tool, 
#           and trigger access. Change the options at your need, in the beginning of this file

#1) If you want to run the PhotonRecoveryTool on mc08 datasets, you need to change the following flag in PAUanalysis_jobOptions.py
#UseProductionBeforeRel152 = False ---> True
#(this must be False only for data produced with rel>15.2)

#2) by default, the PhotonRecoveryTool reruns egamma if UseProductionBeforeRel152 is True, otherwise it does not rerun egamma.
#To override this behaviour you can set explicitely the flag doReRunEgamma in PAUanalysis_jobOptions.py according
#to your needs.
