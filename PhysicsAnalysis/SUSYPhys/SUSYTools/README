SUSYTools library

Developer Notes (Users should look further down the page):

All ClassDef and ClassDef lines must be written like:

#infdef SUSY_ATHENA
Class<blah>
#endif

so that only the standalone compilation sees them. 

If you add any new *.cxx files, don't forget to add them in cmt/requirements and in Root/LinkDef.h.

All #include should specify the path "SUSYTOOLS/file.h" if the header is in this package - the athena compliation requires this, even though the standalone does not.

All classes which are copied from other atloff athena pkgs should be put inside namespace SUSY

Please test any updates with both standalone and athena compilation.

_______________________________________________________________________

User Notes:

Installation:
-------------

For standalone use:
If you analyse with 
  * SUSYD3PDMaker tag p6xx, 2011 data and MC (mc10b and MC11)
svn co svn+ssh://svn.cern.ch/reps/atlasoff/PhysicsAnalysis/SUSYPhys/SUSYTools/tags/SUSYTools-00-00-35 SUSYTools
  * SUSYD3PDMaker tag p601/p602, 2011 data and MC (mc10b) for EPS11/LP11
svn co svn+ssh://svn.cern.ch/reps/atlasoff/PhysicsAnalysis/SUSYPhys/SUSYTools/tags/SUSYTools-00-00-34 SUSYTools
  * SUSYD3PDMaker tag p575/p576, 2011 data and MC (mc10b)
svn co svn+ssh://svn.cern.ch/reps/atlasoff/PhysicsAnalysis/SUSYPhys/SUSYTools/tags/SUSYTools-00-00-29 SUSYTools
  * SUSYD3PDMaker tag p543, 2011 data and MC (mc10a) for PLHC11
svn co svn+ssh://svn.cern.ch/reps/atlasoff/PhysicsAnalysis/SUSYPhys/SUSYTools/tags/SUSYTools-00-00-23 SUSYTools
  * SUSYD3PDMaker-00-09-04, rel 16 2010 data (skimmed or not) and MC, Etmiss RefJet term is fixed
svn co svn+ssh://svn.cern.ch/reps/atlasoff/PhysicsAnalysis/SUSYPhys/SUSYTools/tags/SUSYTools-00-00-07 SUSYTools
  * SUSYD3PDMaker-00-08-07, tag p428, rel 16 reprocessed data and MC, Etmiss RefJet term need to be recomputed
svn co svn+ssh://svn.cern.ch/reps/atlasoff/PhysicsAnalysis/SUSYPhys/SUSYTools/tags/SUSYTools-00-00-06 SUSYTools

Within Athena (not validated recently):
cmt co PhysicsAnalysis/SUSYPhys/SUSYTools
cd PhysicsAnalysis/SUSYPhys/SUSYTools/cmt
cmt make

then 

 * after SUSYTools-00-00-34, you need to run
   python SUSYTools/python/install.py
   to download all pkg dependencies. 
   To compile, you need to follow instructions given at the end of the script

 * prior SUSYTools-00-00-35
   cd SUSYTools/cmt
   make -f Makefile.Standalone

Usage:
------

For standalone use:
===================
cd ../macros

Python script:
chmod u+x susycutflow_1lep.py
./susycutflow_1lep.py
chmod u+x susycutflow_2lep.py
./susycutflow_2lep.py
further options are described through
./susycutflow_1lep.py --help

CINT macro - cutflow:
The cxx macro Reco_dpd2.cxx (prints 1-lepton cutflow) is executed by the following commands after compilation of the package (an example is in src/susy_1lepton_cutflow.cpp):
gSystem->Load("../StandAlone/libSUSYTools.so");     // only needed if compiled with make -f Makefile.Standalone
Reco_dpd2 t;
t.Loop(inFiles);

To add GRL checking to python scripts (only for versions < SUSYTools-00-00-35);
> cmt co DataQuality/GoodRunsLists
> cd DataQuality/GoodRunsLists/cmt
> make -f Makefile.Standalone
Then check the GRLs in SUSYTools/macros are appropriate before running.

To add PileUpWeighting to python scripts (only for versions < SUSYTools-00-00-35);
> cmt co PhysicsAnalysis/AnalysisCommon/PileupReweighting
> cd PhysicsAnalysis/AnalysisCommon/PileupReweighting/cmt
> make -f Makefile.Standalone
Check the susy_*_avgintperbx.root files in data/ are current.

Within Athena:
==============
athena.py SUSYTools/SUSYAnalysis_topOptions.py

susy_1lepton_cutflow.exe <inputFile1,inputFileN>
or as standalone:
bin/susy_1lepton_cutflow_standalone <inputFile1,inputFileN>

If using your own athena (or AthenaROOTAccess code compiled with cmt) analysis code you can just
- #include any of the header files in your own analysis code in athena, as long as you already compiled SUSYTools in Athena.
- add a use SUSYTools-* statement in your requirements file
